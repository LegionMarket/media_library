!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){"use strict";function t(e){var t=/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,i=e.match(t);return i&&11==i[2].length?i[2]:void 0}function i(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,e.isPlainObject(n)&&n),this.init()}var n="qor.medialibrary.action",r="enable."+n,o="disable."+n,a="blur."+n,d="switched.qor.tabbar.radio",s='[data-toggle="qor.tab.radio"]',f=".qor-video__link",l=".qor-medialibrary__video-link",u=".qor-file__options";return i.prototype={constructor:i,init:function(){this.bind(),this.initMedia()},bind:function(){e(document).on(d,s,this.resetMediaData).on(a,f,this.setVideo)},unbind:function(){e(document).off(d,s,this.resetMediaData).off(a,f,this.setVideo)},initMedia:function(){e(l).each(function(){var i=e(this),n=i.data("videolink"),r=t(n);i.parent().addClass("video-cover").html('<iframe width="200" height="200" src="https://www.youtube.com/embed/'+r+'?showinfo=0&controls=0&rel=0&fs=0&modestbranding=1&disablekb=1" frameborder="0" allowfullscreen></iframe>')})},setVideo:function(i){var n=e(i.target),r=n.closest("[data-tab-source]"),o=n.closest(s),a=o.find(u),d=JSON.parse(a.val()),f=n.val(),l=r.find("iframe"),c=t(f);d.SelectedType="video",d.Video=f,a.val(JSON.stringify(d)),c&&(l.length&&l.remove(),r.append('<iframe width="100%" height="400" src="https://www.youtube.com/embed/'+t(f)+'?rel=0&fs=0&modestbranding=1&disablekb=1" frameborder="0" allowfullscreen></iframe>'))},resetMediaData:function(t,i,n){var r=e(i),o=r.find(u),a=JSON.parse(o.val());a.SelectedType=n,"video"==n?a.Video=r.find(f).val():a.Video="",o.val(JSON.stringify(a))},destroy:function(){this.unbind()}},i.DEFAULTS={},e.fn.qorSliderAfterShow=e.fn.qorSliderAfterShow||{},e.fn.qorSliderAfterShow.renderMediaVideo=function(){var i=e('[data-tab-source="video"]'),n=i.data().videourl;i.length&&n&&i.append('<iframe width="100%" height="400" src="https://www.youtube.com/embed/'+t(n)+'?rel=0&fs=0&modestbranding=1&disablekb=1" frameborder="0" allowfullscreen></iframe>')},i.plugin=function(t){return this.each(function(){var r,o=e(this),a=o.data(n);if(!a){if(/destroy/.test(t))return;o.data(n,a=new i(this,t))}"string"==typeof t&&e.isFunction(r=a[t])&&r.apply(a)})},e(function(){var t=".qor-table--medialibrary";e(document).on(o,function(n){i.plugin.call(e(t,n.target),"destroy")}).on(r,function(n){i.plugin.call(e(t,n.target))}).triggerHandler(r)}),i});